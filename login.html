<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script>if (typeof module === 'object') {
        window.module = module;
        module = undefined;
    }


    let DOCUMENT_TITLE = document.title;
    </script>
    <!-- normal script imports etc  -->
    <script src="./scripts/jquery-3.3.1.js"></script>
    <!-- Insert this line after script imports -->
    <script>
        if (window.module)
            module = window.module;

    </script>

    <link rel="stylesheet" type="text/css" href="scripts/jquery-easyui/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="scripts/jquery-easyui/themes/icon.css">
    <script type="text/javascript" src="scripts/jquery-3.3.1.js"></script>
    <script type="text/javascript" src="scripts/jquery-easyui/jquery.easyui.min.js"></script>

    <style type="text/css">
        *{
            font-size:12px;
        }
        body {
            font-family:verdana,helvetica,arial,sans-serif;
            padding:20px;
            font-size:12px;
            margin:0;
        }
        h2 {
            font-size:18px;
            font-weight:bold;
            margin:0;
            margin-bottom:15px;
        }
        .demo-info{
            padding:0 0 12px 0;
        }
        .demo-tip{
            display:none;
        }
    </style>
</head>
<body>
<div class="easyui-panel" data-options="border:false, fit:true" style="width:100%;max-width:400px;padding:10px 60px; margin-top:20px;">
    <div style="margin-bottom:10px">
        <input class="easyui-textbox" style="width:100%;height:40px;padding:12px" data-options="prompt:'输入账号',iconCls:'icon-man',iconWidth:38">
    </div>
    <div style="margin-bottom:10px">
        <input class="easyui-textbox" type="password" style="width:100%;height:40px;padding:12px" data-options="prompt:'输入密码',iconCls:'icon-lock',iconWidth:38">
    </div>
    <div style="margin-bottom:20px">
        <!--<input type="checkbox" checked="checked">
        <span>记住我的账号</span>-->
        <input class="easyui-checkbox" data-options="labelPosition:'after'" name="rememberme"  label="记住我的账号" />
    </div>
    <div>
        <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-ok'" onclick="login()" style="padding:5px 0px;width:100%;">
            <span style="font-size:14px;">登录</span>
        </a>
    </div>
</div>
<script>

    $.parser.onComplete = function () {
        require('electron').remote.getCurrentWindow().show()
    }

    const {ipcRenderer} = require('electron')

    let login_sccess = false;
    function login(){
        login_sccess = true;
        console.log(ipcRenderer.sendSync('login-success', 'ping')) // prints "pong"
    }

    require('electron').remote.getCurrentWindow().on('close', () => {
        if (!login_sccess) {
            ipcRenderer.sendSync('app-quit')
        }
    })
</script>
</body>
</html>
